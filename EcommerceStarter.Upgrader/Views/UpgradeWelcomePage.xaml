<Page x:Class="EcommerceStarter.Upgrader.Views.UpgradeWelcomePage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ui="http://schemas.modernwpf.com/2019"
      Title="Upgrade EcommerceStarter">

    <ScrollViewer VerticalScrollBarVisibility="Auto">
        <StackPanel MaxWidth="700"
                Margin="0,0,0,20">
            <!-- Header -->
            <TextBlock Text="UPGRADE EXISTING INSTALLATION"
                       FontSize="32"
                       FontWeight="Bold"
                       Margin="0,0,0,10"/>

            <TextBlock Text="We detected an existing installation. All your data will be preserved during the upgrade."
                       Style="{StaticResource PageSubtitleStyle}"
                       Margin="0,0,0,30"/>

            <!-- Current Installation Info -->
            <Border Background="{DynamicResource SystemControlPageBackgroundAltHighBrush}"
                    BorderBrush="{StaticResource BrandPrimaryBrush}"
                    BorderThickness="2"
                    CornerRadius="8"
                    Padding="25"
                    Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="CURRENT INSTALLATION"
                               FontWeight="SemiBold"
                               FontSize="18"
                               Foreground="{StaticResource BrandPrimaryBrush}"
                               Margin="0,0,0,20"/>

                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>

                        <TextBlock Grid.Row="0"
                                Grid.Column="0"
                                Text="Company:"
                                FontWeight="SemiBold"
                                Margin="0,0,15,10"/>
                        <TextBlock Grid.Row="0"
                                Grid.Column="1"
                                x:Name="CompanyNameText"
                                Text="Loading..."
                                Margin="0,0,0,10"/>

                        <TextBlock Grid.Row="1"
                                Grid.Column="0"
                                Text="Location:"
                                FontWeight="SemiBold"
                                Margin="0,0,15,10"/>
                        <TextBlock Grid.Row="1"
                                Grid.Column="1"
                                x:Name="InstallPathText"
                                Text="Loading..."
                                TextWrapping="Wrap"
                                Margin="0,0,0,10"/>

                        <TextBlock Grid.Row="2"
                                Grid.Column="0"
                                Text="Database:"
                                FontWeight="SemiBold"
                                Margin="0,0,15,10"/>
                        <TextBlock Grid.Row="2"
                                Grid.Column="1"
                                x:Name="DatabaseText"
                                Text="Loading..."
                                TextWrapping="Wrap"
                                Margin="0,0,0,10"/>

                        <TextBlock Grid.Row="3"
                                Grid.Column="0"
                                Text="Products:"
                                FontWeight="SemiBold"
                                Margin="0,0,15,10"/>
                        <TextBlock Grid.Row="3"
                                Grid.Column="1"
                                x:Name="ProductCountText"
                                Text="0"
                                Margin="0,0,0,10"/>

                        <TextBlock Grid.Row="4"
                                Grid.Column="0"
                                Text="Orders:"
                                FontWeight="SemiBold"
                                Margin="0,0,15,10"/>
                        <TextBlock Grid.Row="4"
                                Grid.Column="1"
                                x:Name="OrderCountText"
                                Text="0"
                                Margin="0,0,0,10"/>

                        <TextBlock Grid.Row="5"
                                Grid.Column="0"
                                Text="Users:"
                                FontWeight="SemiBold"
                                Margin="0,0,15,10"/>
                        <TextBlock Grid.Row="5"
                                Grid.Column="1"
                                x:Name="UserCountText"
                                Text="0"
                                Margin="0,0,0,10"/>

                        <TextBlock Grid.Row="6"
                                Grid.Column="0"
                                Text="Current Version:"
                                FontWeight="SemiBold"
                                Margin="0,0,15,0"/>
                        <TextBlock Grid.Row="6"
                                Grid.Column="1"
                                x:Name="CurrentVersionText"
                                Text="1.0.0"/>
                    </Grid>
                </StackPanel>
            </Border>

            <!-- Health Status -->
            <Border Background="{DynamicResource SystemControlPageBackgroundAltHighBrush}"
                    BorderBrush="{DynamicResource SystemControlForegroundBaseLowBrush}"
                    BorderThickness="1"
                    CornerRadius="8"
                    Padding="20"
                    Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock x:Name="HealthStatusText"
                               Text="Checking health..."
                               FontWeight="SemiBold"
                               FontSize="14"
                               Margin="0,0,0,10"/>
                    <TextBlock x:Name="IssuesText"
                               Text=""
                               Foreground="{StaticResource BrandWarningBrush}"
                               TextWrapping="Wrap"
                               Visibility="Collapsed"
                               Margin="10,0,0,0"/>
                </StackPanel>
            </Border>

            <!-- What will happen -->
            <Border Background="{DynamicResource SystemControlPageBackgroundAltHighBrush}"
                    BorderBrush="{StaticResource BrandSuccessBrush}"
                    BorderThickness="2"
                    CornerRadius="8"
                    Padding="25"
                    Margin="0,0,0,20">
                <StackPanel>
                    <TextBlock Text="✓ What Will Happen During Upgrade"
                               FontWeight="SemiBold"
                               FontSize="18"
                               Foreground="{StaticResource BrandSuccessBrush}"
                               Margin="0,0,0,15"/>

                    <StackPanel>
                        <TextBlock Margin="0,5,0,0">
                            <Run Text="✓"
                                    Foreground="Green"
                                    FontWeight="Bold"/>
                            <Run Text="Automatic backup of current files"/>
                        </TextBlock>
                        <TextBlock Margin="0,5,0,0">
                            <Run Text="✓"
                                    Foreground="Green"
                                    FontWeight="Bold"/>
                            <Run Text="Stop IIS to prevent conflicts"/>
                        </TextBlock>
                        <TextBlock Margin="0,5,0,0">
                            <Run Text="✓"
                                    Foreground="Green"
                                    FontWeight="Bold"/>
                            <Run Text="Deploy updated application code"/>
                        </TextBlock>
                        <TextBlock Margin="0,5,0,0">
                            <Run Text="✓"
                                    Foreground="Green"
                                    FontWeight="Bold"/>
                            <Run Text="Run database migrations (if any)"/>
                        </TextBlock>
                        <TextBlock Margin="0,5,0,0">
                            <Run Text="✓"
                                    Foreground="Green"
                                    FontWeight="Bold"/>
                            <Run Text="Restart IIS and verify site"/>
                        </TextBlock>
                        <TextBlock Margin="0,10,0,0"
                                FontWeight="SemiBold"
                                Foreground="{StaticResource BrandSuccessBrush}">
                            <Run Text="[i]"/>
                            <Run Text="ALL YOUR DATA WILL BE PRESERVED"/>
                        </TextBlock>
                        <TextBlock Margin="20,5,0,0"
                                TextWrapping="Wrap"
                                FontSize="12"
                                Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}">
                            Your products, orders, customers, branding, and all settings will remain intact!
                        </TextBlock>
                    </StackPanel>
                </StackPanel>
            </Border>

            <!-- Upgrade Info -->
            <Border Background="#E8F5E9"
                    BorderBrush="#4CAF50"
                    BorderThickness="1"
                    CornerRadius="6"
                    Padding="15"
                    Margin="0,0,0,30">
                <StackPanel>
                    <TextBlock FontWeight="SemiBold"
                            Foreground="#2E7D32">
                        <Run Text="[i]"/> New Version: <Run x:Name="NewVersionText"
                                Text="1.0.0"/>
                    </TextBlock>
                    <TextBlock Text="This upgrade includes bug fixes, performance improvements, and new features while keeping all your data safe."
                               TextWrapping="Wrap"
                               Foreground="#2E7D32"
                               Margin="0,5,0,0"
                               FontSize="12"/>
                </StackPanel>
            </Border>

            <!-- Action Buttons -->
            <StackPanel Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    Margin="0,20,0,0">
                <Button Content="Cancel"
                        Style="{StaticResource SecondaryButtonStyle}"
                        Click="Cancel_Click"
                        MinWidth="140"/>

                <Button Content="⬆️ Upgrade Now"
                        Style="{StaticResource PrimaryButtonStyle}"
                        Click="Upgrade_Click"
                        MinWidth="180"
                        FontWeight="SemiBold"/>
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</Page>
