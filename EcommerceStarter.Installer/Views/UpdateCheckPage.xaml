<Page x:Class="EcommerceStarter.Installer.Views.UpdateCheckPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      xmlns:ui="http://schemas.modernwpf.com/2019"
      Title="UpdateCheckPage"
      Background="Transparent">

    <Grid Margin="20">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Title -->
        <TextBlock Grid.Row="0"
                   Text="Checking for Updates"
                   FontSize="28"
                   FontWeight="SemiBold"
                   Margin="0,0,0,10"/>

        <!-- Status Message -->
        <TextBlock Grid.Row="1"
                   x:Name="StatusMessage"
                   Text="Connecting to GitHub to check for the latest version..."
                   FontSize="14"
                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                   TextWrapping="Wrap"
                   Margin="0,0,0,30"/>

        <!-- Progress Section -->
        <Border Grid.Row="2"
                Background="{DynamicResource SystemControlPageBackgroundChromeLowBrush}"
                CornerRadius="8"
                Padding="20"
                Margin="0,0,0,20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <!-- Version Info -->
                <StackPanel Grid.Row="0"
                            Grid.Column="0"
                            Margin="0,0,0,15">
                    <TextBlock Text="Current Version:"
                               FontSize="12"
                               Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                    <TextBlock x:Name="CurrentVersionText"
                               Text="v0.9.0"
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
                </StackPanel>

                <StackPanel Grid.Row="0"
                            Grid.Column="1"
                            Margin="20,0,0,15">
                    <TextBlock Text="Latest Available:"
                               FontSize="12"
                               Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                    <TextBlock x:Name="LatestVersionText"
                               Text="Checking..."
                               FontSize="16"
                               FontWeight="SemiBold"
                               Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
                </StackPanel>

                <!-- Progress Bar -->
                <ProgressBar Grid.Row="1"
                             Grid.ColumnSpan="2"
                             x:Name="DownloadProgressBar"
                             Height="8"
                             IsIndeterminate="True"
                             Margin="0,0,0,15"/>

                <!-- Download Stats -->
                <Grid Grid.Row="2"
                      Grid.ColumnSpan="2"
                      Margin="0,0,0,15">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <StackPanel Grid.Column="0"
                                Orientation="Vertical">
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="Size: "
                                       FontSize="12"/>
                            <TextBlock Grid.Column="1"
                                       x:Name="DownloadSizeText"
                                       Text="--- MB"
                                       FontSize="12"
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="Speed: "
                                       FontSize="12"/>
                            <TextBlock Grid.Column="1"
                                       x:Name="SpeedText"
                                       Text="--- MB/s"
                                       FontSize="12"
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        </Grid>
                    </StackPanel>

                    <StackPanel Grid.Column="1"
                                Orientation="Vertical"
                                HorizontalAlignment="Right">
                        <Grid Margin="0,0,0,8">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="Downloaded: "
                                       FontSize="12"/>
                            <TextBlock Grid.Column="1"
                                       x:Name="ProgressText"
                                       Text="0 MB / --- MB"
                                       FontSize="12"
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        </Grid>
                        <Grid>
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="Auto"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <TextBlock Grid.Column="0"
                                       Text="ETA: "
                                       FontSize="12"/>
                            <TextBlock Grid.Column="1"
                                       x:Name="ETAText"
                                       Text="Calculating..."
                                       FontSize="12"
                                       Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                        </Grid>
                    </StackPanel>
                </Grid>

                <!-- Percentage -->
                <TextBlock Grid.Row="3"
                           Grid.ColumnSpan="2"
                           x:Name="PercentageText"
                           Text="0%"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                           TextAlignment="Center"/>
            </Grid>
        </Border>

        <!-- Changelog Section -->
        <Border Grid.Row="3"
                Background="{DynamicResource SystemControlPageBackgroundChromeLowBrush}"
                CornerRadius="8"
                Padding="20"
                Margin="0,0,0,20">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <TextBlock Grid.Row="0"
                           Text="Release Notes"
                           FontSize="14"
                           FontWeight="SemiBold"
                           Margin="0,0,0,10"/>

                <TextBox Grid.Row="1"
                         x:Name="ChangelogText"
                         Text="Release notes will appear here..."
                         IsReadOnly="True"
                         TextWrapping="Wrap"
                         AcceptsReturn="True"
                         VerticalScrollBarVisibility="Auto"
                         MinHeight="120"
                         Padding="10"
                         FontFamily="Segoe UI Emoji, Segoe UI, Arial"
                         FontSize="11"
                         Background="{DynamicResource SystemControlBackgroundAltHighBrush}"
                         Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"/>
            </Grid>
        </Border>

        <!-- Info Section -->
        <TextBlock Grid.Row="4"
                   x:Name="InfoMessage"
                   Text=""
                   FontSize="12"
                   Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                   TextWrapping="Wrap"
                   Margin="0,10,0,0"/>

        <!-- Action Buttons -->
        <StackPanel Grid.Row="5"
                    Orientation="Horizontal"
                    HorizontalAlignment="Center"
                    Margin="0,30,0,0">
            <Button x:Name="SkipButton"
                    Content="Skip Update"
                    Click="SkipButton_Click"
                    MinWidth="120"
                    Padding="15,8"
                    Background="{DynamicResource SystemControlBackgroundBaseMediumBrush}"
                    Foreground="{DynamicResource SystemControlForegroundBaseHighBrush}"
                    FontSize="14"
                    Cursor="Hand"
                    Margin="0,0,10,0"
                    IsEnabled="False"/>

            <Button x:Name="UpgradeButton"
                    Content="Upgrade Now"
                    Click="UpgradeButton_Click"
                    MinWidth="140"
                    Padding="15,8"
                    Background="{DynamicResource SystemControlBackgroundAccentBrush}"
                    Foreground="White"
                    FontSize="14"
                    FontWeight="SemiBold"
                    Cursor="Hand"
                    IsEnabled="False"/>
        </StackPanel>
    </Grid>
</Page>
