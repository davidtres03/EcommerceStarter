<Page x:Class="EcommerceStarter.Installer.Views.InstallationPage"
      xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
      xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
      Title="Installation"
      Loaded="Page_Loaded">
    
    <Grid>
        <!-- Summary/Review Screen (shown first) -->
        <ScrollViewer x:Name="SummaryScrollViewer" 
                     VerticalScrollBarVisibility="Auto"
                     Visibility="Visible">
            <StackPanel x:Name="SummaryPanel" MaxWidth="700" Margin="0,20,0,20">
                <!-- Title -->
                <TextBlock Text="Ready to Install"
                          Style="{StaticResource PageTitleStyle}"
                          HorizontalAlignment="Center"/>
                
                <!-- Subtitle -->
                <TextBlock Text="Please review your configuration before installing"
                          Style="{StaticResource PageSubtitleStyle}"
                          HorizontalAlignment="Center"
                          TextAlignment="Center"/>
                
                <!-- Configuration Summary -->
                <Border Background="{DynamicResource SystemControlPageBackgroundChromeLowBrush}"
                       CornerRadius="8"
                       Padding="25"
                       Margin="0,20,0,20">
                    <StackPanel>
                        <TextBlock Text="Installation Summary" 
                                  FontSize="18" 
                                  FontWeight="SemiBold" 
                                  Margin="0,0,0,20"/>
                        
                        <!-- Store Information -->
                        <TextBlock Text="Store Information" 
                                  FontWeight="SemiBold" 
                                  Margin="0,0,0,10"
                                  Foreground="{StaticResource BrandPrimaryBrush}"/>
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Store Name:" Margin="0,0,0,5"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" x:Name="SummaryStoreName" FontWeight="SemiBold" Margin="0,0,0,5"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Admin Email:" Margin="0,0,0,5"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" x:Name="SummaryAdminEmail" FontWeight="SemiBold" Margin="0,0,0,5"/>
                            
                            <TextBlock Grid.Row="2" Grid.Column="0" Text="Admin Password:" Margin="0,0,0,5"/>
                            <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
                                <TextBlock x:Name="SummaryAdminPassword" 
                                          FontWeight="SemiBold" 
                                          FontFamily="Consolas"
                                          Margin="0,0,10,5"/>
                                <Button Content="Copy" 
                                       x:Name="CopyPasswordButton"
                                       Click="CopyPassword_Click"
                                       Height="20"
                                       Padding="8,0"
                                       FontSize="10"
                                       VerticalAlignment="Center"/>
                            </StackPanel>
                        </Grid>
                        
                        <!-- Password Warning -->
                        <Border Background="#FFF4CE" 
                               BorderBrush="#E3C878" 
                               BorderThickness="1"
                               Padding="12"
                               Margin="0,0,0,15"
                               CornerRadius="4">
                            <StackPanel>
                                <TextBlock FontWeight="SemiBold" Margin="0,0,0,4">
                                    <Run Text="&#x26A0;" Foreground="#C99700" FontSize="14"/>
                                    <Run Text=" IMPORTANT: Save Your Password"/>
                                </TextBlock>
                                <TextBlock Text="Please write down or copy your administrator password before continuing. You will need this to access your store's admin panel."
                                          TextWrapping="Wrap"
                                          FontSize="11"
                                          Foreground="#5C5C5C"/>
                            </StackPanel>
                        </Border>
                        
                        <!-- Database Configuration -->
                        <TextBlock Text="Database Configuration" 
                                  FontWeight="SemiBold" 
                                  Margin="0,0,0,10"
                                  Foreground="{StaticResource BrandPrimaryBrush}"/>
                        <Grid Margin="0,0,0,15">
                            <Grid.ColumnDefinitions>
                                <ColumnDefinition Width="150"/>
                                <ColumnDefinition Width="*"/>
                            </Grid.ColumnDefinitions>
                            <Grid.RowDefinitions>
                                <RowDefinition Height="Auto"/>
                                <RowDefinition Height="Auto"/>
                            </Grid.RowDefinitions>
                            
                            <TextBlock Grid.Row="0" Grid.Column="0" Text="Server:" Margin="0,0,0,5"/>
                            <TextBlock Grid.Row="0" Grid.Column="1" x:Name="SummaryDbServer" FontWeight="SemiBold" Margin="0,0,0,5"/>
                            
                            <TextBlock Grid.Row="1" Grid.Column="0" Text="Database:" Margin="0,0,0,5"/>
                            <TextBlock Grid.Row="1" Grid.Column="1" x:Name="SummaryDbName" FontWeight="SemiBold" Margin="0,0,0,5"/>
                        </Grid>
                        
                        <!-- Optional Features -->
                        <TextBlock Text="Optional Features" 
                                  FontWeight="SemiBold" 
                                  Margin="0,0,0,10"
                                  Foreground="{StaticResource BrandPrimaryBrush}"/>
                        <StackPanel x:Name="SummaryOptionalFeatures">
                            <TextBlock x:Name="SummaryStripe" Text="&#x2713; Stripe Payment Processing" Margin="0,0,0,5" Visibility="Collapsed"/>
                            <TextBlock x:Name="SummaryEmail" Text="&#x2713; Email Notifications" Margin="0,0,0,5" Visibility="Collapsed"/>
                            <TextBlock x:Name="SummaryNoOptional" Text="No optional features configured" 
                                      Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"
                                      FontStyle="Italic"/>
                        </StackPanel>
                    </StackPanel>
                </Border>
                
                <!-- What will be installed -->
                <Border Background="{DynamicResource SystemControlPageBackgroundAltHighBrush}"
                       BorderBrush="{StaticResource BrandPrimaryBrush}"
                       BorderThickness="2"
                       CornerRadius="8"
                       Padding="20"
                       Margin="0,0,0,20">
                    <StackPanel>
                        <TextBlock Text="The following will be installed:" 
                                  FontWeight="SemiBold" 
                                  Margin="0,0,0,10"/>
                        <TextBlock TextWrapping="Wrap">
                            <Run Text="&#x2022; .NET 8 SDK (if not already installed)"/><LineBreak/>
                            <Run Text="&#x2022; SQL Server Express (if not already installed)"/><LineBreak/>
                            <Run Text="&#x2022; IIS with required features"/><LineBreak/>
                            <Run Text="&#x2022; EcommerceStarter application"/><LineBreak/>
                            <Run Text="&#x2022; Database and initial configuration"/><LineBreak/>
                            <Run Text="&#x2022; Desktop shortcuts and Start menu entries"/>
                        </TextBlock>
                    </StackPanel>
                </Border>
                
                <!-- Ready message -->
                <TextBlock HorizontalAlignment="Center"
                          TextAlignment="Center"
                          Margin="0,0,0,20">
                    <Run Text="Click " FontSize="14"/>
                    <Run Text="Install" FontSize="14" FontWeight="Bold" Foreground="{StaticResource BrandPrimaryBrush}"/>
                    <Run Text=" to begin the installation process." FontSize="14"/>
                </TextBlock>
            </StackPanel>
        </ScrollViewer>
        
        <!-- Installation Progress Screen (shown during install) -->
        <ScrollViewer x:Name="ProgressScrollViewer"
                     VerticalScrollBarVisibility="Auto"
                     Visibility="Collapsed">
            <StackPanel x:Name="ProgressPanel" MaxWidth="700" Margin="0,20,0,20">
                <!-- Title -->
                <TextBlock Text="Installing Your Store..."
                          Style="{StaticResource PageTitleStyle}"
                          HorizontalAlignment="Center"/>
                
                <!-- Subtitle -->
                <TextBlock x:Name="SubtitleText"
                          Text="Please wait while we set up your e-commerce platform"
                          Style="{StaticResource PageSubtitleStyle}"
                          HorizontalAlignment="Center"
                          TextAlignment="Center"/>
                
                <!-- Progress Animation Area -->
                <Border Background="{DynamicResource SystemControlPageBackgroundChromeLowBrush}"
                       CornerRadius="12"
                       Padding="40"
                       Margin="0,30,0,30">
                    <StackPanel>
                        <!-- Current Step -->
                        <TextBlock x:Name="CurrentStepText"
                                  Text="Initializing..."
                                  FontSize="18"
                                  FontWeight="SemiBold"
                                  HorizontalAlignment="Center"
                                  Margin="0,0,0,20"/>
                        
                        <!-- Progress Bar -->
                        <ProgressBar x:Name="MainProgressBar"
                                    Height="12"
                                    Minimum="0"
                                    Maximum="100"
                                    Value="0"
                                    Margin="0,0,0,20"/>
                        
                        <!-- Progress Percentage -->
                        <TextBlock x:Name="ProgressPercentageText"
                                  Text="0%"
                                  FontSize="24"
                                  FontWeight="Bold"
                                  HorizontalAlignment="Center"
                                  Foreground="{StaticResource BrandPrimaryBrush}"
                                  Margin="0,0,0,20"/>
                        
                        <!-- Status Message -->
                        <TextBlock x:Name="StatusMessageText"
                                  Text=""
                                  TextWrapping="Wrap"
                                  HorizontalAlignment="Center"
                                  TextAlignment="Center"
                                  Foreground="{DynamicResource SystemControlForegroundBaseMediumBrush}"/>
                    </StackPanel>
                </Border>
                
                <!-- Step Progress Indicators -->
                <Border Background="{DynamicResource SystemControlPageBackgroundAltHighBrush}"
                       CornerRadius="8"
                       Padding="20"
                       Margin="0,0,0,20">
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        
                        <!-- Step 1: Prerequisites -->
                        <TextBlock Grid.Row="0" Grid.Column="0" 
                                  x:Name="Step1Icon"
                                  Text="&#x23F3;" 
                                  FontSize="20"
                                  Margin="0,0,15,10"
                                  VerticalAlignment="Center"/>
                        <TextBlock Grid.Row="0" Grid.Column="1"
                                  x:Name="Step1Text"
                                  Text="Installing prerequisites..."
                                  FontSize="14"
                                  Margin="0,0,0,10"
                                  VerticalAlignment="Center"/>
                        
                        <!-- Step 2: Database -->
                        <TextBlock Grid.Row="1" Grid.Column="0" 
                                  x:Name="Step2Icon"
                                  Text="&#x23F3;" 
                                  FontSize="20"
                                  Margin="0,0,15,10"
                                  VerticalAlignment="Center"
                                  Opacity="0.3"/>
                        <TextBlock Grid.Row="1" Grid.Column="1"
                                  x:Name="Step2Text"
                                  Text="Creating database..."
                                  FontSize="14"
                                  Margin="0,0,0,10"
                                  VerticalAlignment="Center"
                                  Opacity="0.5"/>
                        
                        <!-- Step 3: Application -->
                        <TextBlock Grid.Row="2" Grid.Column="0" 
                                  x:Name="Step3Icon"
                                  Text="&#x23F3;" 
                                  FontSize="20"
                                  Margin="0,0,15,10"
                                  VerticalAlignment="Center"
                                  Opacity="0.3"/>
                        <TextBlock Grid.Row="2" Grid.Column="1"
                                  x:Name="Step3Text"
                                  Text="Deploying application..."
                                  FontSize="14"
                                  Margin="0,0,0,10"
                                  VerticalAlignment="Center"
                                  Opacity="0.5"/>
                        
                        <!-- Step 4: IIS -->
                        <TextBlock Grid.Row="3" Grid.Column="0" 
                                  x:Name="Step4Icon"
                                  Text="&#x23F3;" 
                                  FontSize="20"
                                  Margin="0,0,15,10"
                                  VerticalAlignment="Center"
                                  Opacity="0.3"/>
                        <TextBlock Grid.Row="3" Grid.Column="1"
                                  x:Name="Step4Text"
                                  Text="Configuring IIS..."
                                  FontSize="14"
                                  Margin="0,0,0,10"
                                  VerticalAlignment="Center"
                                  Opacity="0.5"/>
                        
                        <!-- Step 5: Configuration -->
                        <TextBlock Grid.Row="4" Grid.Column="0" 
                                  x:Name="Step5Icon"
                                  Text="&#x23F3;" 
                                  FontSize="20"
                                  Margin="0,0,15,10"
                                  VerticalAlignment="Center"
                                  Opacity="0.3"/>
                        <TextBlock Grid.Row="4" Grid.Column="1"
                                  x:Name="Step5Text"
                                  Text="Applying configuration..."
                                  FontSize="14"
                                  Margin="0,0,0,10"
                                  VerticalAlignment="Center"
                                  Opacity="0.5"/>
                        
                        <!-- Step 6: Finalization -->
                        <TextBlock Grid.Row="5" Grid.Column="0" 
                                  x:Name="Step6Icon"
                                  Text="&#x23F3;" 
                                  FontSize="20"
                                  Margin="0,0,15,0"
                                  VerticalAlignment="Center"
                                  Opacity="0.3"/>
                        <TextBlock Grid.Row="5" Grid.Column="1"
                                  x:Name="Step6Text"
                                  Text="Finalizing installation..."
                                  FontSize="14"
                                  VerticalAlignment="Center"
                                  Opacity="0.5"/>
                    </Grid>
                </Border>
                
                <!-- Error Display -->
                <Border x:Name="ErrorPanel"
                       Background="{DynamicResource SystemControlPageBackgroundAltHighBrush}"
                       BorderBrush="{StaticResource BrandDangerBrush}"
                       BorderThickness="2"
                       CornerRadius="8"
                       Padding="20"
                       Visibility="Collapsed">
                    <StackPanel>
                        <TextBlock
                                  FontSize="16"
                                  FontWeight="SemiBold"
                                  Foreground="{StaticResource BrandDangerBrush}"
                                  Margin="0,0,0,10">
                            <Run Text="&#x26A0; "/>
                            <Run Text="Installation Error"/>
                        </TextBlock>
                        <TextBlock x:Name="ErrorMessageText"
                                  TextWrapping="Wrap"
                                  Margin="0,0,0,10"/>
                        <Button Content="View Details"
                               x:Name="ViewErrorDetailsButton"
                               Style="{StaticResource SecondaryButtonStyle}"
                               Click="ViewErrorDetails_Click"
                               HorizontalAlignment="Left"/>
                    </StackPanel>
                </Border>
            </StackPanel>
        </ScrollViewer>
    </Grid>
</Page>

